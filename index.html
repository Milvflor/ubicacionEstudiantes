<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ubicaci√≥n del Estudiante</title>
</head>
<body>
  <h2>Comparte tu ubicaci√≥n</h2>
  <p>Presiona "Enviar" para compartir tu ubicaci√≥n actual.</p>

  <button id="sendBtn">Enviar ubicaci√≥n</button>

  <p id="status"></p>

  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbxDYDF8f2G5TqoxfPtLT-FA9bArNEbtBtcZj4MjyxJnt6HkfsDOIsZ6i9cqpGR8bihx/exec"; 
    // üëÜ pega aqu√≠ tu URL del Web App

    document.getElementById("sendBtn").addEventListener("click", () => {
      document.getElementById("status").innerText = "Obteniendo ubicaci√≥n...";
 
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          (position) => {
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            console.log(lat, lng);

            document.getElementById("status").innerText =
              `Ubicaci√≥n obtenida: ${lat}, ${lng}. Guardando...`;

            fetch(scriptURL, {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ latitude: lat, longitude: lng })
            })
            .then(() => {
              document.getElementById("status").innerText =
                "Ubicaci√≥n enviada correctamente ‚úÖ";
            })
            .catch((err) => {
              console.error("Error:", err);
              document.getElementById("status").innerText =
                "Error al enviar ubicaci√≥n ‚ùå";
            });
          },
          (error) => {
            console.error("Geo error:", error);
            document.getElementById("status").innerText =
              "No se pudo obtener la ubicaci√≥n: " + error.message;
          }
        );
      } else {
        document.getElementById("status").innerText =
          "El navegador no soporta geolocalizaci√≥n.";
      }
    });
  </script>
</body>
</html>
